# 索引
索引是存储引擎用来快速找到记录的一种数据结构。怎么从大数据的表中快速获得查询结果，一个好的索引非常关键。


因为我们主要使用Mysql的InnoDB存储引擎，索引我们主要介绍B+Tree索引的优化。
那么怎么在Mysql中创建一个好的索引呢？
##索引的六种类型：
普通索引
唯一索引
复合索引
外键索引
主键索引
全文索引
## 创建
###最左前缀原则：
由于B+Tree数据结构的特性，,如果不是按照索引的最左列开始查找，则无法使用索引。
不能跳过索引中的列。
如果查询中有个列的范围查找，则其右边的所有列都无法使用索引进行优化。

**三星索引**：索引将相关的记录放到一起则获得一星；如果索引中的数据顺序和查找中的排列顺序一致则获得二星；如果索引中的列包含了查询中需要的全部列则获得三星；
技巧：索引选择性；模拟hash索引；选择合适的索引列顺序

**索引选择性**：选择性大的放在前面
###前缀索引
**前缀索引**兼顾索引大小和查询速度，但是其缺点是不能用于ORDER BY和GROUP BY操作

B-Tree中一次检索最多需要h-1次I/O（根节点常驻内存），渐进复杂度为log(h)。一般实际应用中，出度d是非常大的数字，通常超过100，因此h非常小（通常不超过3）。

综上所述，用B-Tree作为索引结构效率是非常高的。

##创建索引的注意事项





#Sql优化
##优化查询过程中的数据访问
- 数据太多会导致查询性能下降。
- 确定应用程序是否在检索大量超过需要的数据，可能太多行或列。
- 确认MySQL服务器是否在分析大量不必要的数据行
- 
只查需要的数据
	可以使用limit、不要使用select *、使用缓存

使用索引，（覆盖索引、使索引）

##优化长难查询

**切分查询**

**分解关联查询**
	可以将一条关联语句分解成多个SQL语句执行
	让缓存的效率更高
	执行单个查询可以减少锁的竞争
	在应用层做关联可以更容易对数据库进行拆分

**优化特定类型的查询语句**
###优化count
可以使用explain查询近似值，用近似值代替count(*)
增加汇总表
使用缓存
###优化关联查询
确定on或者using子句的列上有索引；
确保group by和order by中只有一个表中的列，这样MySQL才有可能使用索引；
###优化子查询
尽量使用关联查询替代
###优化group by和distinct
使用索引来优化
关联查询中，使用标识列（主键列）进行分组的效率会更高
如果不需要order by，进行group by时使用order by NULL，MySQL不会进行文件排序
with rollup超级剧和，可以挪到应用程序处理
###优化limit子句
limit偏移量大的时候，查询效率较低。
###优化union
union all的效率高于union
union 会去掉重复的行
### 参考文献
[1] 高性能Mysql


