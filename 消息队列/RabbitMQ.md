分发方式：

- 轮询分发
- 公平分发 （channelqos设置只接收一个）
	- 消费者每次只接受一个消息， 需要开启消息确认
	
- 简单队列（一个生产者，一个消费者）
- 工作队列（一个生产者多个消费者）
## 交换机
交换类型：

1.fanout（订阅/发布）
 -所有的队列都能收到

2.direct （路由）
 - 
3.Topic exchange

 路由键和某模式匹配
 # 匹配一个和多个
 .匹配一个

生产端防丢失

- 开启事务
	> 生产者会阻塞，吞吐量低
- 开启确认机制
	- 普通单条确认（串行）
	- 批量确认（串行）
	- 异步
		> 我们需要为每一个Channel维护一个unconfirm的消息序号集合，每publish一条数据，集合中元素加一，每会调一次handleAck方法，unconfirm集合删掉相应的一条或多条记录。从程序运行效率上看，者个unconfirm集合最好采用SortedSet存储结构

	
